<!--
  ngModel keeps track of whatever's inside there
  anytime it changes we want to update the property of email on component class
-->

<div class="container">
<form
  (ngSubmit)="onSubmit()"
  #emailForm="ngForm">

  <!--form fields-->
  <div class="control">
    <div class="field">
      <label for="label" class="label"> Email </label>
        <input required
              class="input"
              name="email"
              [(ngModel)]="email"
              type = "email"
              pattern = ".+@.+\..+"
              #emailControl = "ngModel"
              [ngClass] = " { 'is-danger' : emailControl.invalid &&  emailControl.touched }"
              >
      </div>
  </div>
    <!-- <ng-container *ngIf = "emailForm.controls.email.invalid">
      <p> You must enter email! </p>
    </ng-container> -->

    <ng-container *ngIf = "emailControl.invalid && emailControl.touched">
     <div
        class = "help is-danger"
        *ngIf = "emailControl.errors.required">
      <p> Your email must be entered correctly</p>
    </div>

    <div
      class = "help is-danger"
      *ngIf = "emailControl.errors.pattern">
      <p>Your pattern does not match</p>
    </div>
    </ng-container>

    <div class="mt-3">
    <button
      class = "button is-primary"
      [disabled] ="emailForm.invalid">
      Submit
    </button>
  </div>
</form>


  <hr />
  <div>
    <p>
      Is Email form valid: {{ emailForm.valid}}
    </p>
    <p>
      Form Values: {{ emailForm.value | json}}
    </p>
  </div>
  <div>
    <!-- <p>
      Email Validation errors: {{ emailForm.controls.email.errors | json }}
    </p> -->
  </div>
</div>
